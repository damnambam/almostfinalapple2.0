{"ast":null,"code":"const API_URL = \"http://localhost:5000/api/auth\";\nconst ADMIN_API_URL = \"http://localhost:5000/api/admin\";\n\n// ========================\n// SIGNUP\n// ========================\nexport const signup = async (email, password, name) => {\n  try {\n    const response = await fetch(`${API_URL}/signup`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email,\n        password,\n        name\n      })\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.message || \"Signup failed\");\n    }\n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// ========================\n// LOGIN\n// ========================\nexport const login = async (email, password) => {\n  try {\n    const response = await fetch(`${API_URL}/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.message || \"Login failed\");\n    }\n\n    // Store user data and token in localStorage\n    if (data.success && data.user) {\n      localStorage.setItem(\"user\", JSON.stringify(data.user));\n      localStorage.setItem(\"token\", data.token);\n      localStorage.setItem(\"isAdmin\", \"false\");\n\n      // Dispatch custom event to update Navigation\n      window.dispatchEvent(new Event('authChange'));\n    }\n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// ========================\n// ADMIN LOGIN\n// ========================\nexport const adminLogin = async (email, password) => {\n  try {\n    const response = await fetch(`${ADMIN_API_URL}/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.error || \"Admin login failed\");\n    }\n\n    // Store admin data and token\n    if (data.token) {\n      localStorage.setItem(\"token\", data.token);\n      localStorage.setItem(\"adminToken\", data.token);\n      localStorage.setItem(\"isAdmin\", \"true\");\n      if (data.admin) {\n        localStorage.setItem(\"user\", JSON.stringify(data.admin));\n        localStorage.setItem(\"admin\", JSON.stringify(data.admin));\n      }\n      console.log('✅ Admin token stored:', data.token);\n\n      // Dispatch custom event to update Navigation\n      window.dispatchEvent(new Event('authChange'));\n    }\n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// ========================\n// LOGOUT\n// ========================\nexport const logout = () => {\n  localStorage.removeItem(\"user\");\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"adminToken\");\n  localStorage.removeItem(\"isAdmin\");\n  localStorage.removeItem(\"admin\");\n\n  // Dispatch custom event to update Navigation\n  window.dispatchEvent(new Event('authChange'));\n};\n\n// ========================\n// GET CURRENT USER\n// ========================\nexport const getCurrentUser = () => {\n  const user = localStorage.getItem(\"user\");\n  const admin = localStorage.getItem(\"admin\");\n\n  // Return admin if exists, otherwise return user\n  if (admin) {\n    return JSON.parse(admin);\n  }\n  return user ? JSON.parse(user) : null;\n};\n\n// ========================\n// CHECK IF LOGGED IN\n// ========================\nexport const isAuthenticated = () => {\n  const token = localStorage.getItem(\"token\") || localStorage.getItem(\"adminToken\");\n\n  // Check if token exists and is not null/undefined string\n  if (!token || token === 'null' || token === 'undefined' || token.trim() === '') {\n    return false;\n  }\n  return true;\n};\n\n// ========================\n// CHECK IF ADMIN\n// ========================\nexport const isAdmin = () => {\n  return localStorage.getItem(\"isAdmin\") === \"true\";\n};\n\n// ========================\n// GET USER PROFILE\n// ========================\nexport const getUserProfile = async userId => {\n  try {\n    const response = await fetch(`${API_URL}/profile/${userId}`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.message || \"Failed to fetch profile\");\n    }\n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n\n// ========================\n// UPDATE USER PROFILE\n// ========================\nexport const updateUserProfile = async (userId, profileData) => {\n  try {\n    const response = await fetch(`${API_URL}/profile/${userId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(profileData)\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      throw new Error(data.message || \"Failed to update profile\");\n    }\n\n    // Update stored user data\n    if (data.success && data.user) {\n      localStorage.setItem(\"user\", JSON.stringify(data.user));\n\n      // Dispatch custom event to update Navigation\n      window.dispatchEvent(new Event('authChange'));\n    }\n    return data;\n  } catch (error) {\n    throw error;\n  }\n};","map":{"version":3,"names":["API_URL","ADMIN_API_URL","signup","email","password","name","response","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","message","error","login","success","user","localStorage","setItem","token","window","dispatchEvent","Event","adminLogin","admin","console","log","logout","removeItem","getCurrentUser","getItem","parse","isAuthenticated","trim","isAdmin","getUserProfile","userId","updateUserProfile","profileData"],"sources":["C:/Users/namil/Desktop/sanaapplenamlocal/frontend/src/services/authService.js"],"sourcesContent":["const API_URL = \"http://localhost:5000/api/auth\";\r\nconst ADMIN_API_URL = \"http://localhost:5000/api/admin\";\r\n\r\n// ========================\r\n// SIGNUP\r\n// ========================\r\nexport const signup = async (email, password, name) => {\r\n  try {\r\n    const response = await fetch(`${API_URL}/signup`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email, password, name }),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.message || \"Signup failed\");\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ========================\r\n// LOGIN\r\n// ========================\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const response = await fetch(`${API_URL}/login`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.message || \"Login failed\");\r\n    }\r\n\r\n    // Store user data and token in localStorage\r\n    if (data.success && data.user) {\r\n      localStorage.setItem(\"user\", JSON.stringify(data.user));\r\n      localStorage.setItem(\"token\", data.token);\r\n      localStorage.setItem(\"isAdmin\", \"false\");\r\n      \r\n      // Dispatch custom event to update Navigation\r\n      window.dispatchEvent(new Event('authChange'));\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ========================\r\n// ADMIN LOGIN\r\n// ========================\r\nexport const adminLogin = async (email, password) => {\r\n  try {\r\n    const response = await fetch(`${ADMIN_API_URL}/login`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.error || \"Admin login failed\");\r\n    }\r\n\r\n    // Store admin data and token\r\n    if (data.token) {\r\n      localStorage.setItem(\"token\", data.token);\r\n      localStorage.setItem(\"adminToken\", data.token);\r\n      localStorage.setItem(\"isAdmin\", \"true\");\r\n      \r\n      if (data.admin) {\r\n        localStorage.setItem(\"user\", JSON.stringify(data.admin));\r\n        localStorage.setItem(\"admin\", JSON.stringify(data.admin));\r\n      }\r\n      \r\n      console.log('✅ Admin token stored:', data.token);\r\n      \r\n      // Dispatch custom event to update Navigation\r\n      window.dispatchEvent(new Event('authChange'));\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ========================\r\n// LOGOUT\r\n// ========================\r\nexport const logout = () => {\r\n  localStorage.removeItem(\"user\");\r\n  localStorage.removeItem(\"token\");\r\n  localStorage.removeItem(\"adminToken\");\r\n  localStorage.removeItem(\"isAdmin\");\r\n  localStorage.removeItem(\"admin\");\r\n  \r\n  // Dispatch custom event to update Navigation\r\n  window.dispatchEvent(new Event('authChange'));\r\n};\r\n\r\n// ========================\r\n// GET CURRENT USER\r\n// ========================\r\nexport const getCurrentUser = () => {\r\n  const user = localStorage.getItem(\"user\");\r\n  const admin = localStorage.getItem(\"admin\");\r\n  \r\n  // Return admin if exists, otherwise return user\r\n  if (admin) {\r\n    return JSON.parse(admin);\r\n  }\r\n  return user ? JSON.parse(user) : null;\r\n};\r\n\r\n// ========================\r\n// CHECK IF LOGGED IN\r\n// ========================\r\nexport const isAuthenticated = () => {\r\n  const token = localStorage.getItem(\"token\") || localStorage.getItem(\"adminToken\");\r\n  \r\n  // Check if token exists and is not null/undefined string\r\n  if (!token || token === 'null' || token === 'undefined' || token.trim() === '') {\r\n    return false;\r\n  }\r\n  \r\n  return true;\r\n};\r\n\r\n// ========================\r\n// CHECK IF ADMIN\r\n// ========================\r\nexport const isAdmin = () => {\r\n  return localStorage.getItem(\"isAdmin\") === \"true\";\r\n};\r\n\r\n// ========================\r\n// GET USER PROFILE\r\n// ========================\r\nexport const getUserProfile = async (userId) => {\r\n  try {\r\n    const response = await fetch(`${API_URL}/profile/${userId}`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.message || \"Failed to fetch profile\");\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\n// ========================\r\n// UPDATE USER PROFILE\r\n// ========================\r\nexport const updateUserProfile = async (userId, profileData) => {\r\n  try {\r\n    const response = await fetch(`${API_URL}/profile/${userId}`, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(profileData),\r\n    });\r\n\r\n    const data = await response.json();\r\n\r\n    if (!response.ok) {\r\n      throw new Error(data.message || \"Failed to update profile\");\r\n    }\r\n\r\n    // Update stored user data\r\n    if (data.success && data.user) {\r\n      localStorage.setItem(\"user\", JSON.stringify(data.user));\r\n      \r\n      // Dispatch custom event to update Navigation\r\n      window.dispatchEvent(new Event('authChange'));\r\n    }\r\n\r\n    return data;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}